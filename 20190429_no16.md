[:contents]

### AWSサービスを理解しよう！

何か久しぶりなような？AWSの製品一覧も日々更新されているようなので、それも見つつ１つ１つ書いて行こうと思います。今回は"ブロックチェーン"です。

### カテゴリ：ブロックチェーン

AWSが提供するブロックチェーンサービスになります。ブロックチェーンとは何なんでしょう？自分もいまいち分かってないので改めて調べてみました。

#### ブロックチェーンとは

取り合えずWikipediaの引用を載せときます。
> ブロックチェーン（英語: Blockchain、ブロックチェインとも）とは、分散型台帳技術、または、分散型ネットワークである。ビットコインの中核技術（サトシ・ナカモトが開発）を原型とするデータベースである。

また、技術的概要でこんなことが書かれています。
> ブロックチェーンは、「ブロック」と呼ばれるデータの単位を生成し、鎖（チェーン）のように連結していくことによりデータを保管するデータベースである。

正直、上の引用だと全然ピンとこなかったので、さらに調べたところ自分の理解は下のような感じでした。

- 分散型台帳技術＝ブロックチェーンではない
- ブロックチェーンは、分散型台帳技術を使った手法の一種
- ブロックチェーンは、データの持ち方としてブロックという単位でデータを持ちチェーンと言われるものでブロックを結んでいるのがブロックチェーンの特徴

文章で書くと分かり辛いので図に頼るとこんな感じです。

![](2019-05-05-17-39-24.png)

データの持ち方部分が、”手法の一種”として細分化されたところなのだと思います。

あとWikipediaの引用には『または、分散型ネットワーク』とありますが、分散型システムのネットワークは分散ネットワークなので紛らわしいからこの文章いらない感じがしました。

ここでは、分散ネットワークの話はちょっと置いといて、分散型台帳技術とブロックチェーンの仕組みの話を記載して本題のAWSサービスの話をして行きたいと思います。

##### 分散型台帳技術

Distributed Ledger Technology (DLT)。データを不特定多数の場所で保管し特定の管理者なしに参加する人達が同じデータを共有する、分散して台帳（データ）を管理する技術。台帳と書いてあるのでついつい紙の売り買い帳簿を連想してしまうのですが、台帳＝データですね。もうちょっとイメージしやすいように例を箇条書きしてみました。

- まず、あるルールで定義した台帳((容器は、DBでもNoSQLでもテキストでもOK))を不特定多数の参加者が用意する
- 各参加者が台帳にデータを書き込む
- 各所にある台帳をPeer to Peerネットワークを使い共有

雑な言い方をすると、データを分散して持ちネットワークで共有すれば分散型台帳技術かなと。

##### ブロックチェーンの仕組み

『データをブロックという単位に分けてチェーンというもので繋ぐ技術』なんですが、ビットコインを例に少し具体的な内容で理解していこうと思います。

ビットコインは大きく分けて下の３つで構成されています。

- 取引履歴（トランザクション）：ブロック部分
- 前のブロックのハッシュ値
- ナンス値（nonce）((Number used onceの略))

###### ナンス値とは？
また新しい用語が出てきました。これはワンタイムトークンともいうんですが、簡単にいってしまうと”１回限定の使い捨てな値”です。ブロックが作られるたんびに毎回発行される３２ビットの値となります。

この３つの要素（取引履歴＆前のブロックのハッシュ値＆ナンス値）からそのブロックのハッシュ値が生成され、そのハッシュ値が次のブロックに反映されてチェーンができ上がる。この仕組みがビットコインのブロックチェーンになります。

![](2019-05-06-20-29-14.png)

ビットコインには、もう１つ"マイニング"という重要なワードがあります。

###### マイニングとは？

マイニング（mining）直訳すると**採掘**ですね。この作業をして１番最初に正解にたどり着いた人には報酬が与えられることから、まさにお宝を**採掘**するという作業（処理）になります。具体的にどんなことを行うかというと、


ブロックチェーンは、パブリックブロックチェーンと分散型台帳技術に分類される
